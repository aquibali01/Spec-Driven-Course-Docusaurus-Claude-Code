<svg width="900" height="600" xmlns="http://www.w3.org/2000/svg">
  <style>
    .ai-node { fill: #3498db; stroke: #2980b9; stroke-width: 2; }
    .robot-node { fill: #e74c3c; stroke: #c0392b; stroke-width: 2; }
    .sensor-data { fill: #2ecc71; stroke: #27ae60; stroke-width: 2; }
    .command-data { fill: #f39c12; stroke: #d35400; stroke-width: 2; }
    .arrow { stroke: #666; stroke-width: 2; marker-end: url(#arrowhead); }
    .label { font-family: Arial, sans-serif; font-size: 14px; text-anchor: middle; }
    .title { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; text-anchor: middle; }
  </style>

  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7"
      refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="450" y="30" class="title">AI-Agent to Robot Integration via ROS 2</text>

  <!-- AI Agent Section -->
  <g transform="translate(50, 80)">
    <rect x="0" y="0" width="200" height="400" fill="#ecf0f1" stroke="#bdc3c4" stroke-width="2" rx="10" />
    <text x="100" y="30" class="title" font-size="16">AI Agent</text>

    <!-- AI Node -->
    <rect x="50" y="60" width="100" height="60" class="ai-node" rx="10" />
    <text x="100" y="90" class="label" fill="white">AI Node</text>

    <!-- AI Processing -->
    <rect x="30" y="140" width="140" height="80" fill="#3498db" stroke="#2980b9" stroke-width="1" rx="5" />
    <text x="100" y="170" class="label" fill="white">AI Processing</text>
    <text x="100" y="190" class="label" fill="white">Algorithm</text>

    <!-- Decision Making -->
    <rect x="30" y="240" width="140" height="60" fill="#3498db" stroke="#2980b9" stroke-width="1" rx="5" />
    <text x="100" y="270" class="label" fill="white">Decision</text>
    <text x="100" y="290" class="label" fill="white">Making</text>
  </g>

  <!-- ROS 2 Middleware -->
  <g transform="translate(350, 80)">
    <rect x="0" y="0" width="200" height="400" fill="#f9f9f9" stroke="#bdc3c4" stroke-width="2" rx="10" />
    <text x="100" y="30" class="title" font-size="16">ROS 2</text>
    <text x="100" y="50" class="label" font-size="12">Middleware</text>

    <!-- Topic: Sensor Data -->
    <rect x="30" y="80" width="140" height="40" class="sensor-data" rx="5" />
    <text x="100" y="105" class="label" fill="white">Sensor Data</text>

    <!-- Topic: Commands -->
    <rect x="30" y="140" width="140" height="40" class="command-data" rx="5" />
    <text x="100" y="165" class="label" fill="white">Commands</text>

    <!-- Service -->
    <rect x="30" y="200" width="140" height="40" fill="#9b59b6" stroke="#8e44ad" stroke-width="1" rx="5" />
    <text x="100" y="225" class="label" fill="white">Services</text>

    <!-- Action -->
    <rect x="30" y="260" width="140" height="40" fill="#e67e22" stroke="#d35400" stroke-width="1" rx="5" />
    <text x="100" y="285" class="label" fill="white">Actions</text>
  </g>

  <!-- Robot Section -->
  <g transform="translate(650, 80)">
    <rect x="0" y="0" width="200" height="400" fill="#ecf0f1" stroke="#bdc3c4" stroke-width="2" rx="10" />
    <text x="100" y="30" class="title" font-size="16">Robot</text>

    <!-- Robot Node -->
    <rect x="50" y="60" width="100" height="60" class="robot-node" rx="10" />
    <text x="100" y="90" class="label" fill="white">Robot Node</text>

    <!-- Sensors -->
    <rect x="30" y="140" width="140" height="60" fill="#2ecc71" stroke="#27ae60" stroke-width="1" rx="5" />
    <text x="100" y="170" class="label" fill="white">Sensors</text>

    <!-- Actuators -->
    <rect x="30" y="220" width="140" height="60" fill="#e74c3c" stroke="#c0392b" stroke-width="1" rx="5" />
    <text x="100" y="250" class="label" fill="white">Actuators</text>

    <!-- Controllers -->
    <rect x="30" y="300" width="140" height="60" fill="#95a5a6" stroke="#7f8c8d" stroke-width="1" rx="5" />
    <text x="100" y="330" class="label" fill="white">Controllers</text>
  </g>

  <!-- Arrows from AI to ROS 2 -->
  <line x1="250" y1="100" x2="350" y2="100" class="arrow" />
  <text x="300" y="90" class="label" font-size="12">Commands</text>

  <line x1="250" y1="120" x2="350" y2="160" class="arrow" />
  <text x="300" y="150" class="label" font-size="12">Service Calls</text>

  <line x1="250" y1="140" x2="350" y2="220" class="arrow" />
  <text x="300" y="210" class="label" font-size="12">Action Goals</text>

  <!-- Arrows from ROS 2 to AI -->
  <line x1="550" y1="100" x2="650" y2="160" class="arrow" />
  <text x="600" y="150" class="label" font-size="12">Sensor Data</text>

  <line x1="550" y1="180" x2="650" y2="120" class="arrow" />
  <text x="600" y="110" class="label" font-size="12">Feedback</text>

  <line x1="550" y1="240" x2="650" y2="100" class="arrow" />
  <text x="600" y="90" class="label" font-size="12">Results</text>

  <!-- Arrows from Robot to ROS 2 -->
  <line x1="650" y1="170" x2="550" y2="100" class="arrow" />
  <text x="600" y="80" class="label" font-size="12">Sensor Data</text>

  <line x1="650" y1="250" x2="550" y2="160" class="arrow" />
  <text x="600" y="140" class="label" font-size="12">Actuator Commands</text>

  <!-- Arrows from ROS 2 to Robot -->
  <line x1="350" y1="160" x2="250" y2="250" class="arrow" />
  <text x="300" y="240" class="label" font-size="12">Commands</text>

  <line x1="350" y1="220" x2="250" y2="270" class="arrow" />
  <text x="300" y="260" class="label" font-size="12">Action Feedback</text>

  <!-- Legend -->
  <g transform="translate(50, 500)">
    <text x="0" y="0" class="title" font-size="14">Legend</text>

    <rect x="0" y="20" width="20" height="20" class="ai-node" />
    <text x="30" y="35" class="label" font-size="12" text-anchor="start">AI Agent</text>

    <rect x="0" y="50" width="20" height="20" class="robot-node" />
    <text x="30" y="65" class="label" font-size="12" text-anchor="start">Robot</text>

    <rect x="0" y="80" width="20" height="20" class="sensor-data" />
    <text x="30" y="95" class="label" font-size="12" text-anchor="start">Sensor Data</text>

    <rect x="0" y="110" width="20" height="20" class="command-data" />
    <text x="30" y="125" class="label" font-size="12" text-anchor="start">Commands</text>
  </g>

  <!-- Process Flow -->
  <g transform="translate(350, 500)">
    <text x="0" y="0" class="title" font-size="14">Integration Flow</text>

    <text x="0" y="25" class="label" font-size="12" text-anchor="start">1. AI processes sensor data</text>
    <text x="0" y="45" class="label" font-size="12" text-anchor="start">2. AI makes decisions</text>
    <text x="0" y="65" class="label" font-size="12" text-anchor="start">3. AI sends commands via ROS 2</text>
    <text x="0" y="85" class="label" font-size="12" text-anchor="start">4. Robot executes commands</text>
    <text x="0" y="105" class="label" font-size="12" text-anchor="start">5. Sensors provide feedback</text>
  </g>
</svg>